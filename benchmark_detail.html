<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>BenchBench</title>
    <link href="assets/icon.png" rel="icon" type="image/x-icon">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator_bootstrap5.min.css" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>







<body class="hero-anime">

    <div class="navigation-wrap bg-light start-header start-style">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="navbar navbar-expand-md navbar-light">
                        <a class="navbar-brand" href="#" target="_blank">
                            <img src="assets/logo.png">
                            <a href="index.html">
                                <span style="font-size: 30px; font-family: Helvetica; color: #000;">
                                    <strong>
                                        <span style="color: #8DB1CD;">Bench</span><span
                                            style="color:#D08983;">Bench</span>
                                    </strong>
                                </span>
                            </a>
                        </a>

                        <button class="navbar-toggler" type="button" data-toggle="collapse"
                            data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                            aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="navbar-nav ml-auto py-4 py-md-0">
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link" href="index.html">Overview</a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link" href="leaderboard.html">
                                        Trade-offs
                                        <!-- <img src="assets/icons8-quote-left-24-black.png"
                                            style="height: 15px; margin-top: 0px; margin-bottom: 15px;">
                                        Leaderboard
                                        <img src="assets/icons8-quote-right-24.png"
                                            style="height: 15px; margin-top: 0px; margin-bottom: 15px;"> -->
                                    </a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link" href="https://arxiv.org/pdf/2405.01719">Paper</a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link"
                                        href="https://github.com/socialfoundations/benchbench/tree/main">Code</a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link" href="./documentation/index.html">Documentation</a>
                                </li>
                                <li class="nav-item pl-4 pl-md-0 ml-0 ml-md-4">
                                    <a class="nav-link" href="submit.html">Submit</a>
                                </li>
                            </ul>
                        </div>

                    </nav>
                </div>
            </div>
        </div>
    </div>


    <div>
        <h3 class="text-center" style="margin-top: 120px; margin-bottom: 30px;" id="benchNameTitle"></h3>
        <!-- <div class="text-center"> -->
        <div style="margin-left: 10%; margin-bottom: 1pt;">
            <button class="btn btn-info btn-sm" id="toggleButton" onclick="toggleStage()">After irrelevant
                changes:</button>
        </div>
        <div class="table-container">
            <table id="dataTable" style="width: 80%;"></table>
        </div>
    </div>



    <script src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const bench = urlParams.get('bench');
        if (bench) {
            document.getElementById("benchNameTitle").innerHTML = `<h2>${bench}</h2>`;
        }


        function loadCSV(stage, bench, tableID) {
            const filePath = `./data/${stage}/${bench}.csv`;

            fetch(filePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Failed to fetch the CSV file');
                    }
                    return response.text();
                })
                .then(content => parseCSV(content))
                .then(data => drawTable(data, document.getElementById(tableID)))
                .catch(error => console.log(error));
        }


        function readFileContent(file) {
            const reader = new FileReader();
            return new Promise((resolve, reject) => {
                reader.onload = event => resolve(event.target.result);
                reader.onerror = error => reject(error);
                reader.readAsText(file);
            });
        }

        function parseCSV(csvData) {
            const rows = csvData.split('\n').filter(row => row.trim() !== ''); // Skip blank lines
            const headers = rows[0].split(',').map(header => {
                return header.trim().replace(/\./g, 'â‹…');
            });

            return rows.slice(1).map(row => {
                const rowValues = row.split(',').map(cell => cell.trim());
                const rowData = {};

                headers.forEach((header, index) => {
                    if (!isNaN(parseFloat(rowValues[index]))) {
                        rowData[header] = parseFloat(rowValues[index]).toFixed(2);
                    } else {
                        rowData[header] = rowValues[index];
                    }
                });

                return rowData;
            });
        }

        function drawTable(dataArray, root) {
            const tabulatorData = dataArray;

            const columns = Object.keys(tabulatorData[0]).map(header => {
                return { title: header, field: header };
            });

            var table = new Tabulator(root, {
                data: tabulatorData,
                columns: columns,
                autoColumns: true,
                scrollHorizontal: true
            });

            table.redraw();
        }

        let currentStage = 'after';
        function toggleStage() {
            currentStage = currentStage === 'before' ? 'after' : 'before';
            document.getElementById('toggleButton').innerText = `${currentStage.charAt(0).toUpperCase() + currentStage.slice(1) + " irrelevant changes:"}`;
            loadCSV(currentStage, bench, "dataTable");
        }

        if (bench) {
            loadCSV(currentStage, bench, "dataTable");
        }
    </script>







</body>

</html>